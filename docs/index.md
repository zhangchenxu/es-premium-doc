---
home: true
heroText: ES Premium
tagline: ğŸš€ä¸€æ¬¾æ›´ç®€æ´ã€æ›´ä¼˜é›…ã€æ›´çº¯ç²¹çš„ESæŸ¥è¯¢æ¡†æ¶ã€‚
actionText: å¼€å§‹ä½¿ç”¨ â†’
actionLink: /pages/52d5c3/
bannerBg: none # auto => ç½‘æ ¼çº¹èƒŒæ™¯(æœ‰bodyBgImgæ—¶æ— èƒŒæ™¯)ï¼Œé»˜è®¤ | none => æ—  | 'å¤§å›¾åœ°å€' | background: è‡ªå®šä¹‰èƒŒæ™¯æ ·å¼       æç¤ºï¼šå¦‚å‘ç°æ–‡æœ¬é¢œè‰²ä¸é€‚åº”ä½ çš„èƒŒæ™¯æ—¶å¯ä»¥åˆ°palette.stylä¿®æ”¹$bannerTextColorå˜é‡

features: # å¯é€‰çš„
  - title: ç®€æ´
    details: è‡´åŠ›äºå®ç°DSLè¯­å¥çš„å®Œç¾è½¬åŒ–
    imgUrl: /img/jianjie.png
  - title: ä¼˜é›…
    details: ä¸€é•œåˆ°åº•çš„å‡½æ•°å¼ç¼–ç ä½“éªŒ
    imgUrl: /img/youya.png
  - title: çº¯ç²¹
    details: ä¸“æ³¨äºESæŸ¥è¯¢ï¼Œå°†æŸ¥è¯¢åšåˆ°æè‡´
    imgUrl: /img/chuncui.png

# æ–‡ç« åˆ—è¡¨æ˜¾ç¤ºæ–¹å¼: detailed é»˜è®¤ï¼Œæ˜¾ç¤ºè¯¦ç»†ç‰ˆæ–‡ç« åˆ—è¡¨ï¼ˆåŒ…æ‹¬ä½œè€…ã€åˆ†ç±»ã€æ ‡ç­¾ã€æ‘˜è¦ã€åˆ†é¡µç­‰ï¼‰| simple => æ˜¾ç¤ºç®€çº¦ç‰ˆæ–‡ç« åˆ—è¡¨ï¼ˆä»…æ ‡é¢˜å’Œæ—¥æœŸï¼‰| none ä¸æ˜¾ç¤ºæ–‡ç« åˆ—è¡¨
postList: none
---
<!-- <p align="center">
  <a class="become-sponsor" href="/pages/1b12ed/">æ”¯æŒè¿™ä¸ªé¡¹ç›®</a>
</p> -->

<style>
.become-sponsor {
  padding: 8px 20px;
  display: inline-block;
  color: #11a8cd;
  border-radius: 30px;
  box-sizing: border-box;
  border: 1px solid #11a8cd;
}
</style>
<!-- 
<br/>
<p align="center">
  <a href="https://www.npmjs.com/package/vuepress-theme-vdoing" target="_blank"><img src="https://img.shields.io/npm/v/vuepress-theme-vdoing" alt="npm" class="no-zoom"></a>
  <a href="https://www.npmjs.com/package/vuepress-theme-vdoing" target="_blank"><img src="https://img.shields.io/npm/dt/vuepress-theme-vdoing" alt="npm" class="no-zoom"></a>
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank"><img src='https://img.shields.io/github/stars/xugaoyi/vuepress-theme-vdoing' alt='GitHub stars' class="no-zoom"></a>
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank"><img src='https://img.shields.io/github/forks/xugaoyi/vuepress-theme-vdoing' alt='GitHub forks' class="no-zoom"></a>
</p> -->

<br/>
<!-- <p align="center" style="color: #999;">
  èµåŠ©å•† (è¿›å…¥æ³¨å†Œä¸ºä¸»é¢˜ä½œè€…å……ç”µ)
</p>
<p align="center">
  <a href="http://apifox.cn/a103xugaoyi" target="_blank"><img src="https://cdn.staticaly.com/gh/xugaoyi/blog-gitalk-comment@master/img/441669861566_.2bedplbm21hc.jpg" alt="npm" class="no-zoom" style="width: 300px;border-radius: 2px;"></a>
</p> -->

<!-- ## ğŸ–ç‰¹åˆ«ç”¨æˆ·
::: cardList 3
```yaml
# - name: OpenHarmony
#   desc: å¼€æ”¾åŸå­å¼€æºåŸºé‡‘ä¼š
#   link: https://docs.openharmony.cn/pages/000000/
#   bgColor: '#f1f1f1'
#   textColor: '#2A3344'
- name: MyBatis-Pluså®˜ç½‘
  desc: ğŸš€ä¸ºç®€åŒ–å¼€å‘è€Œç”Ÿ
  link: https://baomidou.com/
  bgColor: '#f1f1f1'
  textColor: '#2A3344'
- name: Deepin ç¤¾åŒº
  desc: Deepin åº”ç”¨å¼€å‘æŠ€æœ¯åˆ†äº«ã€DTKå¼€å‘ç»éªŒç­‰
  link: https://docs.deepin.org
  bgColor: '#f1f1f1'
  textColor: '#2A3344'
- name: VFormå®˜ç½‘
  desc: ä½ä»£ç è¡¨å•ä¼˜é€‰æ–¹æ¡ˆï¼Œæ‹–æ‹½å¼è®¾è®¡ï¼Œä¸€é”®ç”Ÿæˆæºç 
  link: http://www.vform666.com
  bgColor: '#f1f1f1'
  textColor: '#2A3344'
```
:::

<br/> -->

## ğŸ– é¡¹ç›®ä»‹ç»
åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ ElasticSearch è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œé€šå¸¸ä¼šå…ˆç¼–å†™ç›¸åº”çš„ DSL æŸ¥è¯¢è¯­å¥ã€‚åœ¨ç¡®è®¤ DSL è¯­å¥åï¼Œæˆ‘ä»¬çš„éœ€æ±‚å®é™…ä¸Šå·²ç»å®Œæˆäº†å¤§éƒ¨åˆ†ã€‚ç„¶è€Œï¼Œç›®å‰ Elasticsearch çš„æ ‡å‡† Java API å®ç°å¹¶ä¸æ˜¯ç‰¹åˆ«å‹å¥½ï¼Œè¿™å¯¼è‡´åœ¨ Java å®ç°ä¸ŠèŠ±è´¹äº†ç›¸å½“å¤šçš„æ—¶é—´ã€‚

es-premium æ’ä»¶å°±æ˜¯ä¸ºäº†ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹å¹¶æä¾›æ›´ç›´è§‚ã€æ›´æ˜“äºä½¿ç”¨çš„æ–¹å¼æ¥æ„å»ºå’Œæ‰§è¡Œ Elasticsearch æŸ¥è¯¢ã€‚es-premium æ˜¯ä¸€æ¬¾èƒ½å¤Ÿæ— ç¼è¡”æ¥ DSL è¯­å¥çš„æŸ¥è¯¢æ’ä»¶ï¼Œå®ƒä¸ºæ„å»ºå’Œæ‰§è¡Œ Elasticsearch æŸ¥è¯¢æä¾›äº†ç®€æ´è€Œå¼ºå¤§çš„æ¥å£ã€‚

é€šè¿‡ es-premium æ’ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨çš„æ–¹å¼æ„å»ºæŸ¥è¯¢ï¼Œå¹¶ä¸”å®ƒæä¾›äº†ä¸°å¯Œçš„æ–¹æ³•æ¥æ”¯æŒå„ç§æŸ¥è¯¢ç±»å‹ã€è¿‡æ»¤æ¡ä»¶å’Œèšåˆæ“ä½œã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯è®© Elasticsearch æŸ¥è¯¢åœ¨ Java ä¸­æ›´åŠ å®¹æ˜“å’Œçµæ´»ï¼Œå‡å°‘å¼€å‘è€…åœ¨ç¼–å†™æŸ¥è¯¢æ—¶çš„å·¥ä½œé‡å’Œå¤æ‚æ€§ã€‚

ä½¿ç”¨ es-premium æ’ä»¶ï¼Œä½ å¯ä»¥æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘çš„å®ç°ï¼Œè€Œæ— éœ€è¿‡å¤šå…³æ³¨åº•å±‚çš„ Elasticsearch Java API çš„ä½¿ç”¨ç»†èŠ‚ã€‚å®ƒèƒ½å¤Ÿå¤§å¤§ç®€åŒ–æŸ¥è¯¢çš„ç¼–å†™è¿‡ç¨‹ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œå¹¶ä¸”æä¾›äº†å¯¹ Elasticsearch é«˜çº§åŠŸèƒ½çš„æ”¯æŒã€‚

## ğŸ‰ é¡¹ç›®ä¼˜åŠ¿
> * ç®€åŒ–æŸ¥è¯¢è¿‡ç¨‹ï¼šç®€æ´å¼ºå¤§çš„æ¥å£ï¼Œåªéœ€è¦è°ƒç”¨ç›¸å…³æ¥å£å°±å¯ä»¥å®ç°ç›¸å…³åŠŸèƒ½ï¼›
> * åŸç”ŸESæŸ¥è¯¢ï¼šæ¥å£å®šä¹‰éµå¾ªåŸç”Ÿçš„ESæŸ¥è¯¢æ–¹æ³•ï¼Œä¸é‡‡ç”¨SQLè¯­è¨€è½¬åŒ–ï¼Œé¿å…å®ç°è¿‡ç¨‹ä¸­äº§ç”Ÿæ­§ä¹‰ï¼›
> * æ‰§è¡Œæ•ˆç‡é«˜ï¼šé‡‡ç”¨æ ‘å½¢ç»“æ„çš„å­˜å‚¨æ–¹å¼ï¼Œæ”¯æŒæ›´é«˜çš„é€’å½’æ·±åº¦ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿæ›´å¿«ï¼›

### ğŸ’ æŸ¥è¯¢åœºæ™¯æè¿°
ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªæ—¢æœ‰çš„DSLè¯­å¥ï¼Œå®ç°ä¸€ä¸ªä¸å¤ªå¤æ‚çš„æŸ¥è¯¢ï¼š
è¿™ä¸ªæŸ¥è¯¢çš„é€»è¾‘æ˜¯ï¼šæŸ¥è¯¢ â€œ`ä½äºPhoenixï¼Œä»·æ ¼å°äº100000ï¼Œæˆ¿é—´æ•°å¤§äº3ï¼Œå«ç”Ÿé—´æ•°å¤§äº3ï¼ŒElementarySchoolã€MiddleSchoolã€HighSchoolæœ‰ä»»æ„ä¸¤ä¸ª`â€çš„æˆ¿å­ï¼ŒæŒ‰ç…§â€œ`ä»·æ ¼å‡åºæ’åˆ—`â€ï¼Œå¹¶ä¸”`èšåˆå‡ºè¿™äº›æˆ¿å­çš„agentåå­—`

`ä¸Šè¿°åœºæ™¯å¯¹åº”çš„DSLè¯­å¥`
::: details
```json
GET listing/_search
{
  "from": 0,
  "size": 10,
  "query": {
    "bool": {
      "filter": [
        {
          "match": {
            "city": {
              "query": "Phoenix"
            }
          }
        },
        {
          "range": {
            "price": {
              "from": null,
              "to": 100000
            }
          }
        },
        {
          "range": {
            "bedrooms": {
              "from": 3,
              "to": null
            }
          }
        },
        {
          "range": {
            "baths": {
              "from": 3,
              "to": null
            }
          }
        },
        {
          "bool": {
            "minimum_should_match": 2,
            "should": [
              {
                "match": {
                  "hasMiddleSchool": true
                }
              },
              {
                "match": {
                  "hasHighSchool": true
                }
              },
              {
                "match": {
                  "hasElementarySchool": true
                }
              }
            ]
          }
        }
      ]
    }
  },
  "sort": [
    {
      "price": {
        "order": "asc"
      }
    }
  ],
  "aggregations": {
    "cardinality_agg": {
      "cardinality": {
        "field": "agentName"
      }
    }
  }
}
```
:::

### ğŸ’ ES Java APIæ ‡å‡†å®ç°
```java
// ä½äºPhoenixï¼Œä»·æ ¼å°äº100000ï¼Œbedrooms > 3, baths > 3
BoolQueryBuilder filter = QueryBuilders.boolQuery()
    .filter(QueryBuilders.matchQuery("city", "Phoenix"))
    .filter(QueryBuilders.rangeQuery("price").lt(100000))
    .filter(QueryBuilders.rangeQuery("bedrooms").gt(3))
    .filter(QueryBuilders.rangeQuery("baths").gt(3));
// ElementarySchool,MiddleSchool,HighSchoolä»»æ„æœ‰ä¸¤ä¸ª
BoolQueryBuilder should = QueryBuilders.boolQuery()
    .should(QueryBuilders.matchQuery("hasElementarySchool", true))
    .should(QueryBuilders.matchQuery("hasMiddleSchool", true))
    .should(QueryBuilders.matchQuery("hasHighSchool", true))
    .minimumShouldMatch(2);
filter.filter(should);
// èšåˆæ¡ä»¶
TermsAggregationBuilder agentNameAgg = AggregationBuilders.terms("agent_name_agg")
    .field(EsFieldEnum.AGENT_NAME.getCode()).size(10);
// å¼€å§‹æŸ¥è¯¢
SearchSourceBuilder queryBuilder = new SearchSourceBuilder();
queryBuilder.query(filter)
    .aggregation(agentNameAgg)
    .from(1)
    .size(10);

SearchRequest searchRequest = new SearchRequest();
String[] indices = {"listing"};
searchRequest.indices(indices);
searchRequest.source(queryBuilder);
```

### ğŸ”¥ ES Premiumå®ç°
```java
EsQueryWrapper<SearchResultInfo> queryWrapper = new EsQueryWrapper<>();
queryWrapper.lt("price", 10000)
   .match("city", "Phoenix")
   .gt("bedrooms", 3)
   .gt("baths", 3)
   .shouldMinimum(2,
      eSchool -> eSchool.match("hasElementarySchool", true),
      mSchool -> mSchool.match("hasMiddleSchool", true),
      hSchool -> hSchool.match("hasHighSchool", true)
    ).order(List.of(new QueryOrderInfo("price", SearchOrderEnum.ASC)))
    .page(1, 10)
    .aggregate(new AggregationInfo("agentName", AggregationTypeEnum.CARDINALITY))
    .indices("listing");
```

è¿™ä¸ªğŸŒ°å¯ä»¥æ¯”è¾ƒç›´è§‚çš„è¯´æ˜ï¼Œæˆ‘ä»¬çš„ES Premiumå…·ä½“æ˜¯ä»€ä¹ˆä¸œè¥¿äº†ã€‚è¯¦ç»†æ“ä½œå¯å‚è§APIæ–‡æ¡£ï¼š[**APIæ–‡æ¡£**](/pages/a2f161/)

### ğŸš€ æ•ˆç‡å¯¹æ¯”
å…³äºes-premiumæ‰§è¡Œçš„æ•ˆç‡ï¼Œå¯ä»¥å‚è€ƒå¯¹æ¯”å›¾ï¼Œè¯¥å¯¹æ¯”åŸºäºä¸Šè¿°çš„æŸ¥è¯¢åœºæ™¯è¿›è¡ŒæŸ¥è¯¢ï¼Œæ¯ç§å®ç°æ–¹å¼æ‰§è¡Œ10æ¬¡ï¼Œå–å¹³å‡å€¼ã€‚
å¹³å‡å€¼åˆ†åˆ«ä¸ºï¼š
> * es-premium 815ms
> * esåŸç”ŸAPI  899ms
<div style="text-align:center">
  <img src="https://github.com/WaitingMan/file-warehouse/raw/main/img/es-premium-speed.jpeg" alt="Image" width="400" height="300">
</div>


<br/>

<style>
  pre code {
    white-space: pre-wrap;
    font-family: inherit;
    text-align: left;
  }
</style>

<!-- ## âš¡ï¸æœªæ¥...

::: tip
æœŸå¾… [VuePress v2.0](https://github.com/vuepress/vuepress-next) ä»¥åŠ [VitePress](https://github.com/vuejs/vitepress) çš„æ­£å¼å‘å¸ƒ...

å±Šæ—¶ï¼ŒVuePress 1.x ç¼–è¯‘æ…¢çš„ç¼ºç‚¹å°†å¾—åˆ°æå¤§çš„æ”¹å–„ã€‚æˆ‘å°†ä¼šè§†æƒ…å†µæŠŠä¸»é¢˜å‡çº§è‡³ VuePress v2.0 æˆ– VitePressã€‚è¿˜å¸Œæœ›å¤§å®¶å¤šå¤š [:sparkling_heart:æ”¯æŒ](/pages/1b12ed/) å“Ÿï¼ŒæŒç»­å…³æ³¨å§~
::: -->

<br/>

<!-- ## ğŸ’ å…¬ä¼—å·
`æœ‰è¶£ç ”ç©¶ç¤¾`æ˜¯æœ¬äººå¯¹å„ç§æœ‰è¶£çš„ã€å¥½ç©çš„ã€æ²™é›•çš„åˆ›æ„å’Œæƒ³æ³•ä»¥åœ¨çº¿å°ç½‘ç«™æˆ–è€…æ–‡ç« çš„å½¢å¼è¡¨è¾¾å‡ºæ¥ï¼Œæ¯”å¦‚ï¼š
- [å°éœ¸ç‹æ¸¸æˆæœº](https://game.xugaoyi.com)
- [çˆ±å›½å¤´åƒç”Ÿæˆå™¨](https://avatar.xugaoyi.com/)
- [åˆ°è´¦è¯­éŸ³ç”Ÿæˆå™¨](https://zfb.xugaoyi.com/)

è¿˜æœ‰æ›´å¤šå¥½ç©çš„ç­‰ä½ å»æ¢ç´¢å§~

::: center
<img src="https://fastly.jsdelivr.net/gh/xugaoyi/image_store@master/blog/qrcode.zdqv9mlfc0g.jpg"  style="width:190px;" />
:::

<br/> -->

<!-- ## âš¡ åé¦ˆä¸äº¤æµ

åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜å’Œæƒ³æ³•ï¼Œè¯·ç»™æˆ‘æ [Issue](https://github.com/xugaoyi/vuepress-theme-vdoing/issues)ã€‚
ä½ ä¹Ÿå¯ä»¥åœ¨IssueæŸ¥çœ‹åˆ«äººæçš„é—®é¢˜å’Œç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚

æˆ–è€…åŠ å…¥æˆ‘ä»¬çš„äº¤æµç¾¤ï¼š

<table>
  <tbody>
    <tr>
      <td align="center" valign="middle">
        <img src="https://cdn.staticaly.com/gh/xugaoyi/blog-gitalk-comment@master/img/0.4pp7r95mdai0.jpeg" class="no-zoom" style="width:120px;margin: 10px;">
        <p>vdoingå¾®ä¿¡ç¾¤(æ·»åŠ æˆ‘å¾®ä¿¡å¤‡æ³¨"è¿›ç¾¤")</p>
      </td>
      <td align="center" valign="middle">
        <img :src="$withBase('/img/qrcode/qqq.webp')" alt="ç¾¤å·: 694387113" class="no-zoom" style="width:120px;margin: 10px;">
        <p>vdoing QQç¾¤: 694387113</p>
      </td>
    </tr>
  </tbody>
</table> -->

<style>
  .page-wwads{
    width:100%!important;
    min-height: 0;
    margin: 0;
  }
  .page-wwads .wwads-img img{
    width:80px!important;
  }
  .page-wwads .wwads-poweredby{
    width: 40px;
    position: absolute;
    right: 25px;
    bottom: 3px;
  }
  .wwads-content .wwads-text, .page-wwads .wwads-text{
    height: 100%;
    padding-top: 5px;
    display: block;
  }
</style>
